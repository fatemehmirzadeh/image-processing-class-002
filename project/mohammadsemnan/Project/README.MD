راه های زیادی برای تشخیص اسکناس وجود دارد مانند ترکیب لبه یابی و OCR که اطلاعات عکس را میخواند. روشی دیگر استفاده از رنگ اسکناس ها در کانال های مختلف میباشد مانند RGB و HSV که ما از کانال RGB برای تشخیص رنگ استفاده میکنیم.

این کد ها برای تمیز نگه داشتن workspace هستند و معمولا همه جا استفاده میشوند
```
clc;
close all;
clear all;
```

حالا عکس های خود را میخوانیم که شامل عکس ورودی و عکس هایی که ما به عنوان مرجع و کلاس در نظر میگیریم میباشد.
```
m1 = imread('1 (1).jpg');
m2=imread('1 (2).jpg');
m3=imread('1 (3).jpg');
m4=imread('1 (4).jpg');
m5=imread('1 (5).jpg');
m6=imread('input.jpg');
```
توجه داشته باشید که عکس های مرجع به مراتب بیشتر اصت چون باید تمام حالات در نظر گرفته شود اما در این جا برای کوتاه تر کردن کد این کار ها را انجام میدهیم این برنامه شامل بیش از 35 عکس ورودی به عنوان مرجع میباشد

حالا میتوان تصاویر خود را مورد بهینه سازی هیستوگرام قرار دهیم این گام دلخواه میباشد اما از آن جایی که تصاویر ما ممکن است تاریک یا کم نور باشند این مورد به ما کمک میکند

```

m1 = histeq(m1);
m2 = histeq(m2);
m3 = histeq(m3);
m4 = histeq(m4);
m5 = histeq(m5);
m6 = histeq(m6);
```

حالا اندازه تصاویر خود را در 2 متغیر ذخیره میکنیم

```
x=size(m1,1);
y=size(m1,2);
```

از آن جایی که با کانال RGB داریم کار میکنیم سه متغیر به نام های r,g,b تعریف میکنیم که نشان دهنده هر یک از کانال های قرمز و سبز و آبی میباشد سپس آن را به int 32 تبدیل میکنیم چرا که مجموع کل مقدار رنگ پیکسل ها را میخواهیم و از آن جایی که 255 حداثر میباشد آن را تبدیل میکنیم

```
g=0;
r=0;
b=0;
g=uint32(g);
r=uint32(r);
b=uint32(b);
```

اکنون با استفاده از یک حلقه به اندازه تصویر مقدار رنگ هر پیکسل را با پیکسل های دیگر جمع میکنیم و نیاز است که مقدار پیکسل هر کانال را نیز به int 32 تبدیل کنیم تا مقدار صحیح را بدست آوریم
```
for i=1:x
    for j=1:y
        r=uint32(m1(i,j,1))+r;
        g=uint32(m1(i,j,2))+g;
        b=uint32(m1(i,j,3))+b;
    end

end
```

از آن جایی که ابعاد را داریم برای محاسبه میانگین رنگ کل پیکسل ها مقدار کل خود را در تعداد کل پیکسل ها تقسیم میکنیم مانند زیر

```
r=r/(x*y);
g=g/(x*y);
b=b/(x*y);
```

حالا به ازای هر عکس مرجع و عکس ورودی تمام مراحل بالا را انجام میدهیم دا مقدار هر اسکناس را به طور مجزا به دست آوریم و از آن جایی که بهینه سازی انجام داده ایم مقدار ها دقیق تر هستند

اکنون با شرط ها بررسی میکنیم که آیا تصویر ورودی با کدام از اسکناس ها همخوانی دارد.برای این کار مقدار میانگین هر پیکسل رنگی خود را با میانگین رنگی هر پیکسل مرجع مقایسه میکنیم و اگر که مقدار پیکسل 5 عدد اختلاف داشت اسکناس ورودی شامل آن کلاس میشود. هرچه مقدار اختلاف را بیشتر کنیم میزان خطا کاهش میابد اما ممکن است که افزایش نیز پیدا کند به دلیل شباهت اسکناس های مختلف.
```
if((ri>=r-5) && (ri<=r+5)&&(gi>=g-5) && (gi<=g+5)&&(bi>=b-5) && (bi<=b+5))
    imshow(m6);title('1000 Tomani');
elseif ((ri>=r1-5) && (ri<=r1+5)&&(gi>=g1-5) && (gi<=g1+5)&&(bi>=b1-5) && (bi<=b1+5))
    imshow(m6);title('500 Tomani');                                  
elseif ((ri>=r2-5) && (ri<=r2+5)&&(gi>=g2-5) && (gi<=g2+5)&&(bi>=b2-5) && (bi<=b2+5))
    imshow(m6);title('5000 Tomani');                                 
elseif ((ri>=r3-5) && (ri<=r3+5)&&(gi>=g3-5) && (gi<=g3+5)&&(bi>=b3-5) && (bi<=b3+5))
    imshow(m6);title('10000 Tomani');                                  
elseif ((ri>=r4-5) && (ri<=r4+5)&&(gi>=g4-5) && (gi<=g4+5)&&(bi>=b4-5) && (bi<=b4+5))
    imshow(m6);title('50000 Tomani'); 
else
    disp('was not in database')
end
```

در این روش تعداد شرط ها به مراتب بیشتر است و تعداد کلاس های ورودی ما نیز بیشتر میباشد و در اینجا تنها برای کوتاه تر شدن کد این اعمال انجام شده است.

در آخر خروجی ها مانند زیر میباشند

![1](https://user-images.githubusercontent.com/94211519/174270349-7755de89-8c12-4ae8-b3ca-41d9ce95fa65.jpg)
![1-2](https://user-images.githubusercontent.com/94211519/174270362-746b8234-2c4e-4119-be0b-c897000cbdbd.jpg)
![2](https://user-images.githubusercontent.com/94211519/174270379-06d3f73b-a036-445f-ab4e-1253948637a7.jpg)
![2-2](https://user-images.githubusercontent.com/94211519/174270382-be27cbe5-3164-4d1f-baf8-dbbf8eaf0a3d.jpg)
![5](https://user-images.githubusercontent.com/94211519/174270393-0f866730-0522-4124-8e9e-fce7fce5a89e.jpg)
![5-4](https://user-images.githubusercontent.com/94211519/174270397-f6b2d147-8129-4275-863a-5f13850ba8f6.jpg)
![10](https://user-images.githubusercontent.com/94211519/174270402-6798b421-4138-47a3-bba7-ed38c303e2f1.jpg)
![10-6](https://user-images.githubusercontent.com/94211519/174270406-25be86be-0c55-4188-a014-5f848521d5c6.jpg)
![50](https://user-images.githubusercontent.com/94211519/174270413-465a08a5-97b3-49e3-a183-3492b7cc755b.jpg)
![100-3](https://user-images.githubusercontent.com/94211519/174270418-9f8ef15c-849e-406d-be23-676f062a19e1.jpg)


